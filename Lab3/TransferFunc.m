function [H, stdH] = TransferFunc(x, y, AvgArry, HFuntion)if size(x) ~= size(y)	error('Input and output measurements must have the same size.');end;[TimeSamples, Experiments] = size(x);LengthAvgArry = length(AvgArry);H = zeros(TimeSamples, LengthAvgArry);stdH = zeros(TimeSamples, LengthAvgArry);for AvgIndx = 1:LengthAvgArry,	Averages = AvgArry(AvgIndx);		NrH = fix(Experiments/Averages);	AllH = zeros(TimeSamples, NrH);	for indx = 1:NrH,		SelectExp = (indx-1)*Averages+[1:Averages];		AllH(:, indx) = feval(HFuntion, x(:,SelectExp), y(:,SelectExp));	end;		H(:, AvgIndx) = AllH(:, 1);	if NrH > 1,		stdH(:, AvgIndx) = std(AllH.').';	else		stdH(:, AvgIndx) = NaN*ones(TimeSamples, 1);	end;end;